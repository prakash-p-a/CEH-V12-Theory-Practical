COMMAND LINE PROMPTS OF CEH LABS V12

-:Prerequisite Tools:-
>- `sudo apt-get update & sudo apt-get upgrade`
>- `sudo apt install zsh zsh-autocomplete zsh-common zsh-autosuggestions zsh-syntax-highlighting`
>- `chsh -s $(which zsh)`  Then enter this to make your default shell as zsh and logout and logback in for changes to take effect
>- To update anyfile `sudo source [filename]`
>- If  Ctrl+ Left/Right not working  add below lines to .zshrc
>	bindkey 'D (Key to Replace)' backward-word
>	bindkey 'C (Key to Replace)' forward-word
>- `Install sublime text deb file`
>- `Download deb file of AngryIP scanner `
>- `Make root user as default terminal - sudo su`
>- `sudo apt install nfs-common for getting showmount command`
>- `sudo apt install nfs-kernel-server`
 

<<<Module 2 - Footprinting & Reconnaissance>>>


-:Passive Information Gathering:-

`Builtwith Extension` - To identify technologies used in the site
`whatweb -v [url]` - To identify technologies and other info.
`wafw00f` - To identify WAF
`robots.txt & sitemap.xml` / sitemaps.xml
`webhttrack` - To clone Website
https://search.censys.io/ <br>
###### Netcraft -- Provides DNS, which technologies being used and much more information about a website
https://sitereport.netcraft.com/
 
How Find the maximum frame size for the network?
> ping [website.com] –f –l 1472
 -l size Send buffer size.
 -f Set Don't Fragment flag in packet

To find the minimum ttl accepted by the website
First run the tracert or traceroute on the target web server and identify the number of hops and take a note of it.
Now run the ping command by adding the switches -i ( ttl value) -n (number of pings)
Now put the value of hops which we got in the tracert in the -i switch , to get the min ttl accurately `OR` 
(Try changing the values slightly down until you get the minimum ttl accepted by the website)

---Whois Enumeration---
`whois [domain]`

---DNS Reconnaissance---
`dnsenum [domain]`
`dnsrecon -d [domain]`

---Reverse IP Domain Check---
`https://www.yougetsignal.com/tools/web-sites-on-web-server/`
https://dnsdumpster.com/

---Subdomain Enumeration Tool- Passive/Active---
```
subfinder -d [domain name]
```
`amass enum -passive -d [domain name] -src `

---The Web Application Firewall (WAF) Fingerprinting Toolkit---
`wafw00f [domain]`

---Custom Worlist Using `cewl`---
We can make custom wordlists from any webpage using a  tool called Cewl
```sh
cewl -w [output_file] -d[Level of crawling] -m [ minimum words we need in our wordlist] [domain_name]
```

---Reverse IP Domain Check---
https://www.yougetsignal.com/tools/web-sites-on-web-server/

---IP Range Analyzer---
https://www.arin.net/resources/registry/whois/  

---OSINT Framework---
https://osintframework.com/

---Metadata Extraction using `FOCA` Tool---
[Releases · ElevenPaths/FOCA (github.com)](https://github.com/ElevenPaths/FOCA/releases)

---Enumeration using Metasploit---
>[!check] NMAP inside Metasploit
>msfdb init
>service postgresql start
>msfconsole
>msf > db_status
>nmap -Pn -sS -A -oX Test 10.10.10.0/24
>db_import Test
>hosts -> To show all available hosts in the subnet
>db_nmap -sS -A 10.10.10.16 -> To extract services of particular machine
>services -> to get all available services in a subnet


<<<Module 3 - Scanning the network>>>


-:Active Information Gathering:-

``Do nmap pot scanning for snmp port 161 - if we get open port do script scanning and save the output file.``

---Host DIscovery---
`nmap -sn -PR/PE/PP/PM 192.168.1.0/24`

---`Angry IP Scanner - ipscan`---
`netdiscover -i [Interface]  -r [IP\Subnet]`

---Identify Host OS with TTL---

---Scanning Networks---

---Hping3---
Port Scanning using Hping3:
`hping3 --scan 1-3000 -S 10.10.10.10`
--scan parameter defines the port range to scan and –S represents SYN flag

Pinging the target using HPing3:
`hping3 -c 3 10.10.10.10 -1`
-c 3 means that we only want to send three packets to the target machine.

UDP Packet Crafting
`hping3 10.10.10.10 --udp --rand-source --data 500`

TCP SYN request
`hping3 -S 10.10.10.10 -p 80 -c 5`
-S will perform TCP SYN request on the target machine, -p will pass the traffic through which port is assigned, and -c is 
the count of the packets sent to the Target machine.

HPing flood
`hping3 10.10.10.10 --flood`



<<<Module 4 - Enumeration>>>

---Ping [ip]---
``nmap -Pn -p 1-65535 -A -T4 -vv [IP]``  /  ``nmap -Pn  -sU -p 53,161,389 -A -T4 -vv [IP]``
NMAP NSE Docs - https://nmap.org/nsedoc/scripts/

---NetBIOS Enumeration  (139) ---
> NetBIOS Enumeration : 
    nbtstat –A 10.10.10.16
    net use
    net use \10.10.10.16\e ““\user:””
    net use \10.10.10.16\e ““/user:””

- NetBIOS Enumerator Windows Application 
- nmap script --script=nbstat*

---SNMP Enumeration (161)---
``nmap –sU –p 161`` 
``nmap -sU -p 161 --script="snmp*" [IP]``

``snmp-check [ip]`` - List All Information about systems in  a network
``snmpwalk -c public -v1 [ip]`` 

> msfconsole
    use auxiliary/scanner/snmp/snmp_enum
    set RHOSTS and exploit
    use auxiliary/scanner/snmp/snmp_login
    set RHOSTS and exploit
    
---LDAP Enumeration (389)---
``Adexplorer``
OR 
Firstly, Login to the Windows machine via the given credentials and access the Local Users and Groups from 
Run Window(Win + R) and typing `lusrmgr.msc`

---NFS Enumeration (389)---
``nmap -p 2049 [ip] -sV -vv -T4``
``showmount -e [IP]``

---DNS Enumeration (53)---
``nmap -p 53 [ip] -sV -vv -T4 --script="dns*"``

Use Passive Info Gathering Tools
``use sudo while using dnsrecon``

---SMTP Enumeration (25,2525,587)---
``nmap -p 25,2525,587 [ip] -sV -vv -T4 --script="smtp*"``

---SMB Enumeration (137,138,139,445)---
use scanner/smb/smb_version
set RHOSTS 10.10.10.8-16
set THREADS 100
run
hosts -> now exact os_flavor information has been updated

---FTP Enumeration (21)---
``nmap -p 21 [ip] -sV -vv -T4 --script="ftp*"``

---Enum4linux ---
``enum4linux -a [ip]``

---Nikto ---
``nikto -h [domain/ip] -output [filename] -Format txt/xml/html``


<<<Module 05 - Vulnerability Analysis>>>

>[!check] Nikto & Nessus
>`nikto -h [ip / domain] -Tuning 1`
>Nessus runs on  https://localhost:8834
>Nessus -> Policies > Advanced scan
>Discovery > Host Discovery > Turn off Ping the remote host
>Port Scanning > check the Verify open TCP ports found by local port enumerators
>Advanced
>Max number of TCP sessions per host and = unlimited
>Max number of TCP sessions per scan = unlimited
>Credentials > Windows > Username & Password
>Save policy > Create new scan > User Defined
>Enter name & Target
>Schedule tab > Turn of Enabled
>Hit launch from drop-down of save


#Stay tuned for more
